<div>
    <div id="page-wrapper">
        <div class="row">
            <div class="col-lg-12">
                <h2 class="page-header text-primary">Reports</h2>
            </div>
        </div>

        <ul class="nav nav-tabs">
            <li role="presentation" class="active"><a href="/Reports"><i class="fa fa-file-text-o"></i> Patients Report</a></li>
            <li role="presentation"><a href="/Financial_Report"><i class="fa fa-plus-circle"></i> Financial Report</a></li>
        </ul>        

        <div class="col-lg-12"> 
            <div class="panel panel-default"> 
                <div class="panel-heading"> Patients report: {{Practice_Name}}</div>
                    <div class="panel-body"> 
                        <div class="row" style="margin-top: 10px; margin-right: 10px;">
                            <div class="col-md-4">
                                <div class="row">                                    
                                    <div class="col-md-8">
                                        <select class="form-control insert" ng-model="Name" name="Name" ng-required="true" ng-change="changedValueGetPractice_ID(Name)" data-ng-options="practices as practices.Name for practices in Practices | orderBy:'Name'">
                                            <option value="">Select practice name</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <button type="button" class="btn btn-info" onclick="View_Patients_Demographic_Graph_Modal()"><i class="fa fa-pie-chart"></i> Chart</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4"><h5 class="pull-right">Search:</h5></div>
                            <div class="form-group col-md-4">
                                <input class="form-control" type="text" style="font-size:13px;" ng-model="search">
                            </div>
                        </div>

                        <div class="table-responsive table-bordered"> 
                            <table class="table"> 
                                <thead>
                                    <tr>
                                        <th ng-click="sort('FirstName')">First Name<span ng-show="sortKey=='FirstName'" class="fa sort-icon" ng-class="{'fa-chevron-up':reverse,'fa-chevron-down':!reverse}"></span></th>
                                        <th ng-click="sort('LastName')">Last Name<span ng-show="sortKey=='LastName'" class="fa sort-icon" ng-class="{'fa-chevron-up':reverse,'fa-chevron-down':!reverse}"></span></th>
                                        <th ng-click="sort('Email')">Email Address<span ng-show="sortKey=='Email'" class="fa sort-icon" ng-class="{'fa-chevron-up':reverse,'fa-chevron-down':!reverse}"></span></th>
                                        <th ng-click="sort('Cell_Number')">ID Number<span ng-show="sortKey=='Cell_Number'" class="fa sort-icon" ng-class="{'fa-chevron-up':reverse,'fa-chevron-down':!reverse}"></span></th>
                                        <th ng-click="sort('RegistrationDate')">Registration Date<span ng-show="sortKey=='RegistrationDate'" class="fa sort-icon" ng-class="{'fa-chevron-up':reverse,'fa-chevron-down':!reverse}"></span></th>
                                    </tr>
                                </thead>
                                <tbody ng-show="Patients.length > 0" dir-paginate="Patient in Patients | filter:search | orderBy:sortKey:reverse | itemsPerPage:100"> 
                                    <tr> 
                                        <td>{{Patient.FirstName}}</td>
                                        <td>{{Patient.LastName}}</td>
                                        <td>{{Patient.Email}}</td>
                                        <td>{{Patient.Cell_Number}}</td>  
                                        <td>{{Patient.RegistrationDate}}</td> 
                                    </tr>
                                    <tr class="row alert alert-info" ng-show="Patients.length > 0 && Patient.PrintSummary == 'true'"><td colspan="4"><b>Number of Patients = </b>{{Patient.num_TotalPatientsPerGroup}}</td></tr>
                                    <tr class="row alert alert-info" ng-show="Patients.length > 0 && Patient.PrintSummary == 'Groupfooter'"><td colspan="4"><b>Number of Patients = </b>{{Patient.num_TotalPatientsPerGroup}}</td></tr>
                                    <tr class="row alert alert-info" ng-show="Patients.length > 0 && Patient.PrintSummary == 'footer'"><td colspan="4"><b>Number of Patients = </b>{{Patient.num_TotalPatients}}</td></tr>
                                    <tr class="row alert alert-info text-center" ng-show="Patients.length == 0"><td colspan="4"><b>System Message!</b> No patients records to display.</td></tr>
                                </tbody>
                            </table> 
                        </div>
                    </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <dir-pagination-controls class="pull-right" max-size="5" direction-links="true" boundary-links="true" style="margin-right: 20px;"></dir-pagination-controls>
                </div>
            </div>
        </div>

        <!--View Patients Demographic Graph Modal-->
        <div id="View_Patients_Demographic_Graph_Modal" class="modal fade">
            <div class="modal-dialog" style="width:90%;">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title text-primary">Registered Patients Demographics: {{Practice_Name}}</h4>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="portlet light" style="border: 1px solid #ddd; border-radius: 4px; height: auto; width: auto">
                                    <div class="portlet-title">
                                        <div class="caption caption-md">
                                            <i class="icon-bar-chart font-dark hide"></i>
                                            <span class="caption-subject font-green-steel uppercase bold">Patients Gender Stats</span>
                                        </div>
                                    </div>
                                    <div class="portlet-body">
                                        <div ng-show="num_Male > 0 || num_Female > 0"><p><h5>A total of {{num_Male + num_Female}} patients are registed.</h5></p></div>
                                        <div id="donutchart_Gender" style="width: 500px; height:300px; margin: auto"></div>
                                        <div ng-show="num_Male > 0 || num_Female > 0"><p><h5><b>Suggestion</b>: Implement marketing strategies directed to the {{Suggestion}} population. </h5></p></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="portlet light" style="border: 1px solid #ddd; border-radius: 4px; height: auto; width: auto">
                                    <div class="portlet-title">
                                        <div class="caption caption-md">
                                            <i class="icon-bar-chart font-dark hide"></i>
                                            <span class="caption-subject font-green-steel uppercase bold">Patients Age Stats</span>
                                        </div>
                                    </div>
                                    <div class="portlet-body">
                                        <div id="donutchart_Age" style="width: 500px; height: 300px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div><!--View Patients Demographic Graph Modal-->
    </div>
</div>